var Dropdown=function(){function n(n,t){this.elements=n;var i=this;this.searchquery=ko.observable(""),this.chosenitems=ko.observableArray(),this.inputfocus=ko.observable(!1),this.dropdownopen=new ko.observable(!1),this.focusmoved=ko.computed(function(){i.inputfocus()||i.dropdownopen(!1)}).extend({throttle:100}),this.itemstoshow=ko.computed(function(){var t=i.searchquery().toLowerCase().trim(),r=[];return t.length?ko.utils.arrayForEach(n,function(n){var i=n.toLowerCase().indexOf(t);i>-1&&(n=n.slice(0,i)+"<b>"+n.slice(i,i+t.length)+"<\/b>"+n.slice(i+t.length),r.push(n))}):r=n.slice(0),ko.utils.arrayForEach(i.chosenitems(),function(n){ko.utils.arrayRemoveItem(r,n)}),r.sort()}),this.buttontext=ko.computed(function(){var n=i.chosenitems();return n.length>0?n.toString()+'   <span class ="caret"><\/span>':t?t:'Choose item   <span class="caret"><\/span>'})}return n.prototype.keypressed=function(n,t){if(t.charCode==13)this.itemstoshow().length&&this.additem(this.itemstoshow()[0]);else return!0},n.prototype.buttonclick=function(){this.dropdownopen(!this.dropdownopen()),this.inputfocus(this.dropdownopen()),this.searchquery("")},n.prototype.additem=function(n){this.chosenitems.push(n.replace("<b>","").replace("<\/b>","")),this.chosenitems.sort(),this.searchquery(""),this.dropdownopen(!0),this.inputfocus(!0)},n.prototype.removeitem=function(n){this.chosenitems.remove(n),this.dropdownopen(!0),this.inputfocus(!0)},n}(),viewmodel=function(){function n(){this.drop=new Dropdown(countries)}return n}(),countries;window.onload=function(){var n=new viewmodel;ko.applyBindings(n)},countries=["Armenia","Brazil","Canada","Denmark","Bolivia"]